using System;
using System.Diagnostics;
using System.ComponentModel;

class Program
{
    static void Main()
    {
        Console.Write("Enter process name: ");
        string processName = Console.ReadLine();

        Process[] processes = Process.GetProcessesByName(processName);

        if (processes.Length == 0)
        {
            Console.WriteLine("Process not found.");
        }
        else
        {
            Process process = processes[0];
            int threadCount = 0;

            foreach (ProcessThread thread in process.Threads)
            {
                try
                {
                    if (thread.PriorityLevel >= ThreadPriorityLevel.TimeCritical)
                    {
                        // Thread is a kernel thread
                        threadCount++;
                    }
                }
                catch (Win32Exception)
                {
                    // Ignore threads we can't access
                }
            }

            Console.WriteLine("Process " + processName + " has " + threadCount + " kernel threads.");
        }
    }
}
